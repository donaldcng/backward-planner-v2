<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>📅 Backward Planner</title>
    <link rel="stylesheet" href="style.css">
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/sortablejs@1.15.0/Sortable.min.js"></script>
</head>
<body>
    <!-- Navigation -->
    <nav class="nav">
        <div class="nav__container">
            <div class="nav__brand">
                <h1 class="nav__title">📅 Planner</h1>
            </div>
            <button class="nav__toggle" id="navToggle">
                <span class="nav__toggle-bar"></span>
                <span class="nav__toggle-bar"></span>
                <span class="nav__toggle-bar"></span>
            </button>
            <ul class="nav__menu" id="navMenu">
                <li><a href="#" class="nav__link nav__link--active" data-page="planning">Planning</a></li>
                <li><a href="#" class="nav__link" data-page="settings">Settings</a></li>
                <li><a href="#" class="nav__link" data-page="about">About</a></li>
            </ul>
        </div>
    </nav>

    <!-- Main Content -->
    <main class="main">
        <!-- Planning Page -->
        <div class="page page--active" id="planningPage">
            <div class="container">
                <div class="page__header">
                    <h2>Project Planning</h2>
                    <p>Work backward from your deadline to create the perfect timeline</p>
                </div>

                <!-- Project Setup -->
                <div class="card">
                    <div class="card__header">
                        <h3>📋 Project Setup</h3>
                        <p>Set up your project details and deadline to get started</p>
                    </div>
                    <div class="card__content">
                        <div class="form-group">
                            <label for="project-name">Project Name</label>
                            <input type="text" id="project-name" placeholder="Enter your project name">
                        </div>
                        <div class="form-group">
                            <label for="deadline">Project Deadline *</label>
                            <input type="date" id="deadline" required>
                        </div>
                        <div class="form-group">
                            <label for="project-description">Description (Optional)</label>
                            <textarea id="project-description" placeholder="Describe the project goals and scope" rows="3"></textarea>
                        </div>
                        <button class="btn btn--primary" id="set-deadline">Set Deadline & Start Planning</button>
                        <div class="deadline-display" id="deadline-display"></div>
                    </div>
                </div>

                <!-- Task Management -->
                <div class="card" id="task-section" style="display: none;">
                    <div class="card__header">
                        <h3>📝 Add Tasks</h3>
                        <p>Add tasks to your project. They will be calculated backward from your deadline.</p>
                    </div>
                    <div class="card__content">
                        <div class="task-form">
                            <div class="form-row">
                                <div class="form-group">
                                    <label for="task-name">Task Name</label>
                                    <input type="text" id="task-name" placeholder="e.g., Research & Planning">
                                </div>
                                <div class="form-group">
                                    <label for="task-duration">Duration (days)</label>
                                    <input type="number" id="task-duration" min="1" placeholder="5">
                                </div>
                                <div class="form-group">
                                    <button class="btn btn--primary" id="add-task">+ Add Task</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Timeline Section -->
                <div class="card">
                    <div class="card__header">
                        <div class="timeline-header">
                            <div class="timeline-title">
                                <h3>📊 Project Timeline</h3>
                                <p>Tasks are scheduled backward from your deadline. Drag to reorder after generating timeline.</p>
                            </div>
                            <div class="timeline-actions">
                                <button class="btn btn--outline btn--small" id="clear-all">Clear All</button>
                                <button class="btn btn--outline btn--small" id="import-btn">Import</button>
                                <div class="export-group">
                                    <button class="btn btn--secondary btn--small" id="export-btn">JSON</button>
                                    <button class="btn btn--secondary btn--small" id="export-csv">CSV</button>
                                    <button class="btn btn--secondary btn--small" id="export-pdf">HTML</button>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="card__content">
                        <div class="timeline-controls">
                            <button class="btn btn--primary" id="generate-timeline">Generate Timeline</button>
                            <button class="btn btn--outline" id="load-sample">Load Sample Project</button>
                        </div>
                        
                        <div class="table-container">
                            <table class="plan-table" id="plan-table" style="display: none;">
                                <thead>
                                    <tr>
                                        <th>📋 Task</th>
                                        <th class="hide-mobile">📅 Start Date</th>
                                        <th class="hide-mobile">📅 Start Day</th>
                                        <th>🏁 End Date</th>
                                        <th class="hide-mobile">🏁 End Day</th>
                                        <th>⏱️ Duration</th>
                                        <th class="hide-mobile">🔧 Actions</th>
                                    </tr>
                                </thead>
                                <tbody id="plan-body">
                                </tbody>
                            </table>
                            
                            <div class="no-tasks-message" id="no-tasks-msg">
                                <div class="empty-state">
                                    <div class="empty-state__icon">📋</div>
                                    <h4>No tasks added yet</h4>
                                    <p>Add your first task above to get started with planning</p>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Settings Page -->
        <div class="page" id="settingsPage">
            <div class="container">
                <div class="page__header">
                    <h2>Settings</h2>
                    <p>Customize your planning experience</p>
                </div>

                <!-- Theme Settings -->
                <div class="card">
                    <div class="card__header">
                        <h3>🎨 Color Theme</h3>
                        <p>Choose from multiple themes</p>
                    </div>
                    <div class="card__content">
                        <div class="theme-grid" id="theme-selector">
                            <div class="theme-option" data-theme="classic-blue">
                                <div class="theme-preview theme-preview--blue"></div>
                                <span>Classic Blue</span>
                            </div>
                            <div class="theme-option" data-theme="forest-green">
                                <div class="theme-preview theme-preview--green"></div>
                                <span>Forest Green</span>
                            </div>
                            <div class="theme-option" data-theme="sunset-orange">
                                <div class="theme-preview theme-preview--orange"></div>
                                <span>Sunset Orange</span>
                            </div>
                            <div class="theme-option" data-theme="dark-mode">
                                <div class="theme-preview theme-preview--dark"></div>
                                <span>Dark Mode</span>
                            </div>
                            <div class="theme-option" data-theme="purple-dark">
                                <div class="theme-preview theme-preview--purple-dark"></div>
                                <span>Purple Dark</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Font Size -->
                <div class="card">
                    <div class="card__header">
                        <h3>🔤 Font Size</h3>
                        <p>Adjust text size for comfortable reading</p>
                    </div>
                    <div class="card__content">
                        <div class="font-size-options" id="font-size-selector">
                            <label class="font-option">
                                <input type="radio" name="fontSize" value="small">
                                <span>Small (Compact)</span>
                            </label>
                            <label class="font-option">
                                <input type="radio" name="fontSize" value="medium" checked>
                                <span>Medium (Default)</span>
                            </label>
                            <label class="font-option">
                                <input type="radio" name="fontSize" value="large">
                                <span>Large (Accessible)</span>
                            </label>
                        </div>
                    </div>
                </div>

                <!-- Holiday Settings -->
                <div class="card">
                    <div class="card__header">
                        <h3>🏖️ Holiday Settings</h3>
                        <p>Configure how Hong Kong public holidays affect your timeline</p>
                    </div>
                    <div class="card__content">
                        <div class="form-group">
                            <label class="checkbox-label">
                                <input type="checkbox" id="exclude-holidays" checked>
                                <span class="checkbox-custom"></span>
                                Skip Hong Kong public holidays in timeline calculations
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- About Page -->
        <div class="page" id="aboutPage">
            <div class="container">
                <div class="page__header">
                    <h2>About Backward Planner</h2>
                    <p>Your intelligent project planning companion</p>
                </div>

                <div class="card">
                    <div class="card__header">
                        <h3>🤔 What is Backward Planning?</h3>
                    </div>
                    <div class="card__content">
                        <p>Backward planning is a strategic approach that starts with your project deadline and works backward to determine when each task should begin.</p>
                    </div>
                </div>
            </div>
        </div>
    </main>

    <!-- Hidden file input -->
    <input type="file" id="import-file" accept=".json" style="display: none;">

    <!-- Loading -->
    <div class="loading" id="loading" style="display: none;">
        <div class="loading__spinner"></div>
        <p>Loading...</p>
    </div>

    <!-- Toast container -->
    <div class="toast-container" id="toast-container"></div>

    <!-- JavaScript -->
    <script src="script.js"></script>
</body>
</html>